"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;

var _styledBase = _interopRequireDefault(require("@emotion/styled-base"));

var _react = _interopRequireDefault(require("react"));

var _propTypes = _interopRequireDefault(require("prop-types"));

var _reactImmutableProptypes = _interopRequireDefault(require("react-immutable-proptypes"));

var _netlifyCmsUiDefault = require("netlify-cms-ui-default");

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }

const StyledAuthenticationPage = (0, _styledBase.default)("section", {
  target: "e121jgcy0",
  label: "StyledAuthenticationPage"
})(process.env.NODE_ENV === "production" ? {
  name: "1ul3gz4",
  styles: "display:flex;flex-flow:column nowrap;align-items:center;justify-content:center;height:100vh;"
} : {
  name: "1ul3gz4",
  styles: "display:flex;flex-flow:column nowrap;align-items:center;justify-content:center;height:100vh;",
  map: "/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9BdXRoZW50aWNhdGlvblBhZ2UuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBTStDIiwiZmlsZSI6Ii4uLy4uL3NyYy9BdXRoZW50aWNhdGlvblBhZ2UuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0IFByb3BUeXBlcyBmcm9tICdwcm9wLXR5cGVzJztcbmltcG9ydCBJbW11dGFibGVQcm9wVHlwZXMgZnJvbSAncmVhY3QtaW1tdXRhYmxlLXByb3B0eXBlcyc7XG5pbXBvcnQgc3R5bGVkIGZyb20gJ0BlbW90aW9uL3N0eWxlZCc7XG5pbXBvcnQgeyBJY29uLCBidXR0b25zLCBzaGFkb3dzLCBHb0JhY2tCdXR0b24gfSBmcm9tICduZXRsaWZ5LWNtcy11aS1kZWZhdWx0JztcblxuY29uc3QgU3R5bGVkQXV0aGVudGljYXRpb25QYWdlID0gc3R5bGVkLnNlY3Rpb25gXG4gIGRpc3BsYXk6IGZsZXg7XG4gIGZsZXgtZmxvdzogY29sdW1uIG5vd3JhcDtcbiAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG4gIGhlaWdodDogMTAwdmg7XG5gO1xuXG5jb25zdCBQYWdlTG9nb0ljb24gPSBzdHlsZWQoSWNvbilgXG4gIGNvbG9yOiAjYzRjNmQyO1xuICBtYXJnaW4tdG9wOiAtMzAwcHg7XG5gO1xuXG5jb25zdCBMb2dpbkJ1dHRvbiA9IHN0eWxlZC5idXR0b25gXG4gICR7YnV0dG9ucy5idXR0b259O1xuICAke3NoYWRvd3MuZHJvcERlZXB9O1xuICAke2J1dHRvbnMuZGVmYXVsdH07XG4gICR7YnV0dG9ucy5ncmF5fTtcblxuICBwYWRkaW5nOiAwIDMwcHg7XG4gIG1hcmdpbi10b3A6IC00MHB4O1xuICBkaXNwbGF5OiBmbGV4O1xuICBhbGlnbi1pdGVtczogY2VudGVyO1xuICBwb3NpdGlvbjogcmVsYXRpdmU7XG5cbiAgJHtJY29ufSB7XG4gICAgbWFyZ2luLXJpZ2h0OiAxOHB4O1xuICB9XG5gO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBBdXRoZW50aWNhdGlvblBhZ2UgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQge1xuICBzdGF0aWMgcHJvcFR5cGVzID0ge1xuICAgIG9uTG9naW46IFByb3BUeXBlcy5mdW5jLmlzUmVxdWlyZWQsXG4gICAgaW5Qcm9ncmVzczogUHJvcFR5cGVzLmJvb2wsXG4gICAgY29uZmlnOiBJbW11dGFibGVQcm9wVHlwZXMubWFwLmlzUmVxdWlyZWQsXG4gIH07XG5cbiAgY29tcG9uZW50RGlkTW91bnQoKSB7XG4gICAgLyoqXG4gICAgICogQWxsb3cgbG9naW4gc2NyZWVuIHRvIGJlIHNraXBwZWQgZm9yIGRlbW8gcHVycG9zZXMuXG4gICAgICovXG4gICAgY29uc3Qgc2tpcExvZ2luID0gdGhpcy5wcm9wcy5jb25maWcuZ2V0SW4oWydiYWNrZW5kJywgJ2xvZ2luJ10pID09PSBmYWxzZTtcbiAgICBpZiAoc2tpcExvZ2luKSB7XG4gICAgICB0aGlzLnByb3BzLm9uTG9naW4odGhpcy5zdGF0ZSk7XG4gICAgfVxuICB9XG5cbiAgaGFuZGxlTG9naW4gPSBlID0+IHtcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgdGhpcy5wcm9wcy5vbkxvZ2luKHRoaXMuc3RhdGUpO1xuICB9O1xuXG4gIHJlbmRlcigpIHtcbiAgICBjb25zdCB7IGNvbmZpZywgaW5Qcm9ncmVzcyB9ID0gdGhpcy5wcm9wcztcblxuICAgIHJldHVybiAoXG4gICAgICA8U3R5bGVkQXV0aGVudGljYXRpb25QYWdlPlxuICAgICAgICA8UGFnZUxvZ29JY29uIHNpemU9XCIzMDBweFwiIHR5cGU9XCJuZXRsaWZ5LWNtc1wiIC8+XG4gICAgICAgIDxMb2dpbkJ1dHRvbiBkaXNhYmxlZD17aW5Qcm9ncmVzc30gb25DbGljaz17dGhpcy5oYW5kbGVMb2dpbn0+XG4gICAgICAgICAge2luUHJvZ3Jlc3MgPyAnTG9nZ2luZyBpbi4uLicgOiAnTG9naW4nfVxuICAgICAgICA8L0xvZ2luQnV0dG9uPlxuICAgICAgICB7Y29uZmlnLmdldCgnc2l0ZV91cmwnKSAmJiA8R29CYWNrQnV0dG9uIGhyZWY9e2NvbmZpZy5nZXQoJ3NpdGVfdXJsJyl9PjwvR29CYWNrQnV0dG9uPn1cbiAgICAgIDwvU3R5bGVkQXV0aGVudGljYXRpb25QYWdlPlxuICAgICk7XG4gIH1cbn1cbiJdfQ== */"
});
const PageLogoIcon = (
/*#__PURE__*/
0, _styledBase.default)(_netlifyCmsUiDefault.Icon, {
  target: "e121jgcy1",
  label: "PageLogoIcon"
})(process.env.NODE_ENV === "production" ? {
  name: "11nl61t",
  styles: "color:#c4c6d2;margin-top:-300px;"
} : {
  name: "11nl61t",
  styles: "color:#c4c6d2;margin-top:-300px;",
  map: "/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9BdXRoZW50aWNhdGlvblBhZ2UuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBY2lDIiwiZmlsZSI6Ii4uLy4uL3NyYy9BdXRoZW50aWNhdGlvblBhZ2UuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0IFByb3BUeXBlcyBmcm9tICdwcm9wLXR5cGVzJztcbmltcG9ydCBJbW11dGFibGVQcm9wVHlwZXMgZnJvbSAncmVhY3QtaW1tdXRhYmxlLXByb3B0eXBlcyc7XG5pbXBvcnQgc3R5bGVkIGZyb20gJ0BlbW90aW9uL3N0eWxlZCc7XG5pbXBvcnQgeyBJY29uLCBidXR0b25zLCBzaGFkb3dzLCBHb0JhY2tCdXR0b24gfSBmcm9tICduZXRsaWZ5LWNtcy11aS1kZWZhdWx0JztcblxuY29uc3QgU3R5bGVkQXV0aGVudGljYXRpb25QYWdlID0gc3R5bGVkLnNlY3Rpb25gXG4gIGRpc3BsYXk6IGZsZXg7XG4gIGZsZXgtZmxvdzogY29sdW1uIG5vd3JhcDtcbiAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG4gIGhlaWdodDogMTAwdmg7XG5gO1xuXG5jb25zdCBQYWdlTG9nb0ljb24gPSBzdHlsZWQoSWNvbilgXG4gIGNvbG9yOiAjYzRjNmQyO1xuICBtYXJnaW4tdG9wOiAtMzAwcHg7XG5gO1xuXG5jb25zdCBMb2dpbkJ1dHRvbiA9IHN0eWxlZC5idXR0b25gXG4gICR7YnV0dG9ucy5idXR0b259O1xuICAke3NoYWRvd3MuZHJvcERlZXB9O1xuICAke2J1dHRvbnMuZGVmYXVsdH07XG4gICR7YnV0dG9ucy5ncmF5fTtcblxuICBwYWRkaW5nOiAwIDMwcHg7XG4gIG1hcmdpbi10b3A6IC00MHB4O1xuICBkaXNwbGF5OiBmbGV4O1xuICBhbGlnbi1pdGVtczogY2VudGVyO1xuICBwb3NpdGlvbjogcmVsYXRpdmU7XG5cbiAgJHtJY29ufSB7XG4gICAgbWFyZ2luLXJpZ2h0OiAxOHB4O1xuICB9XG5gO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBBdXRoZW50aWNhdGlvblBhZ2UgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQge1xuICBzdGF0aWMgcHJvcFR5cGVzID0ge1xuICAgIG9uTG9naW46IFByb3BUeXBlcy5mdW5jLmlzUmVxdWlyZWQsXG4gICAgaW5Qcm9ncmVzczogUHJvcFR5cGVzLmJvb2wsXG4gICAgY29uZmlnOiBJbW11dGFibGVQcm9wVHlwZXMubWFwLmlzUmVxdWlyZWQsXG4gIH07XG5cbiAgY29tcG9uZW50RGlkTW91bnQoKSB7XG4gICAgLyoqXG4gICAgICogQWxsb3cgbG9naW4gc2NyZWVuIHRvIGJlIHNraXBwZWQgZm9yIGRlbW8gcHVycG9zZXMuXG4gICAgICovXG4gICAgY29uc3Qgc2tpcExvZ2luID0gdGhpcy5wcm9wcy5jb25maWcuZ2V0SW4oWydiYWNrZW5kJywgJ2xvZ2luJ10pID09PSBmYWxzZTtcbiAgICBpZiAoc2tpcExvZ2luKSB7XG4gICAgICB0aGlzLnByb3BzLm9uTG9naW4odGhpcy5zdGF0ZSk7XG4gICAgfVxuICB9XG5cbiAgaGFuZGxlTG9naW4gPSBlID0+IHtcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgdGhpcy5wcm9wcy5vbkxvZ2luKHRoaXMuc3RhdGUpO1xuICB9O1xuXG4gIHJlbmRlcigpIHtcbiAgICBjb25zdCB7IGNvbmZpZywgaW5Qcm9ncmVzcyB9ID0gdGhpcy5wcm9wcztcblxuICAgIHJldHVybiAoXG4gICAgICA8U3R5bGVkQXV0aGVudGljYXRpb25QYWdlPlxuICAgICAgICA8UGFnZUxvZ29JY29uIHNpemU9XCIzMDBweFwiIHR5cGU9XCJuZXRsaWZ5LWNtc1wiIC8+XG4gICAgICAgIDxMb2dpbkJ1dHRvbiBkaXNhYmxlZD17aW5Qcm9ncmVzc30gb25DbGljaz17dGhpcy5oYW5kbGVMb2dpbn0+XG4gICAgICAgICAge2luUHJvZ3Jlc3MgPyAnTG9nZ2luZyBpbi4uLicgOiAnTG9naW4nfVxuICAgICAgICA8L0xvZ2luQnV0dG9uPlxuICAgICAgICB7Y29uZmlnLmdldCgnc2l0ZV91cmwnKSAmJiA8R29CYWNrQnV0dG9uIGhyZWY9e2NvbmZpZy5nZXQoJ3NpdGVfdXJsJyl9PjwvR29CYWNrQnV0dG9uPn1cbiAgICAgIDwvU3R5bGVkQXV0aGVudGljYXRpb25QYWdlPlxuICAgICk7XG4gIH1cbn1cbiJdfQ== */"
});
const LoginButton = (0, _styledBase.default)("button", {
  target: "e121jgcy2",
  label: "LoginButton"
})(_netlifyCmsUiDefault.buttons.button, ";", _netlifyCmsUiDefault.shadows.dropDeep, ";", _netlifyCmsUiDefault.buttons.default, ";", _netlifyCmsUiDefault.buttons.gray, ";padding:0 30px;margin-top:-40px;display:flex;align-items:center;position:relative;", _netlifyCmsUiDefault.Icon, "{margin-right:18px;}" + (process.env.NODE_ENV === "production" ? "" : "/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9BdXRoZW50aWNhdGlvblBhZ2UuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBbUJpQyIsImZpbGUiOiIuLi8uLi9zcmMvQXV0aGVudGljYXRpb25QYWdlLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCBQcm9wVHlwZXMgZnJvbSAncHJvcC10eXBlcyc7XG5pbXBvcnQgSW1tdXRhYmxlUHJvcFR5cGVzIGZyb20gJ3JlYWN0LWltbXV0YWJsZS1wcm9wdHlwZXMnO1xuaW1wb3J0IHN0eWxlZCBmcm9tICdAZW1vdGlvbi9zdHlsZWQnO1xuaW1wb3J0IHsgSWNvbiwgYnV0dG9ucywgc2hhZG93cywgR29CYWNrQnV0dG9uIH0gZnJvbSAnbmV0bGlmeS1jbXMtdWktZGVmYXVsdCc7XG5cbmNvbnN0IFN0eWxlZEF1dGhlbnRpY2F0aW9uUGFnZSA9IHN0eWxlZC5zZWN0aW9uYFxuICBkaXNwbGF5OiBmbGV4O1xuICBmbGV4LWZsb3c6IGNvbHVtbiBub3dyYXA7XG4gIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gIGp1c3RpZnktY29udGVudDogY2VudGVyO1xuICBoZWlnaHQ6IDEwMHZoO1xuYDtcblxuY29uc3QgUGFnZUxvZ29JY29uID0gc3R5bGVkKEljb24pYFxuICBjb2xvcjogI2M0YzZkMjtcbiAgbWFyZ2luLXRvcDogLTMwMHB4O1xuYDtcblxuY29uc3QgTG9naW5CdXR0b24gPSBzdHlsZWQuYnV0dG9uYFxuICAke2J1dHRvbnMuYnV0dG9ufTtcbiAgJHtzaGFkb3dzLmRyb3BEZWVwfTtcbiAgJHtidXR0b25zLmRlZmF1bHR9O1xuICAke2J1dHRvbnMuZ3JheX07XG5cbiAgcGFkZGluZzogMCAzMHB4O1xuICBtYXJnaW4tdG9wOiAtNDBweDtcbiAgZGlzcGxheTogZmxleDtcbiAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgcG9zaXRpb246IHJlbGF0aXZlO1xuXG4gICR7SWNvbn0ge1xuICAgIG1hcmdpbi1yaWdodDogMThweDtcbiAgfVxuYDtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQXV0aGVudGljYXRpb25QYWdlIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50IHtcbiAgc3RhdGljIHByb3BUeXBlcyA9IHtcbiAgICBvbkxvZ2luOiBQcm9wVHlwZXMuZnVuYy5pc1JlcXVpcmVkLFxuICAgIGluUHJvZ3Jlc3M6IFByb3BUeXBlcy5ib29sLFxuICAgIGNvbmZpZzogSW1tdXRhYmxlUHJvcFR5cGVzLm1hcC5pc1JlcXVpcmVkLFxuICB9O1xuXG4gIGNvbXBvbmVudERpZE1vdW50KCkge1xuICAgIC8qKlxuICAgICAqIEFsbG93IGxvZ2luIHNjcmVlbiB0byBiZSBza2lwcGVkIGZvciBkZW1vIHB1cnBvc2VzLlxuICAgICAqL1xuICAgIGNvbnN0IHNraXBMb2dpbiA9IHRoaXMucHJvcHMuY29uZmlnLmdldEluKFsnYmFja2VuZCcsICdsb2dpbiddKSA9PT0gZmFsc2U7XG4gICAgaWYgKHNraXBMb2dpbikge1xuICAgICAgdGhpcy5wcm9wcy5vbkxvZ2luKHRoaXMuc3RhdGUpO1xuICAgIH1cbiAgfVxuXG4gIGhhbmRsZUxvZ2luID0gZSA9PiB7XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIHRoaXMucHJvcHMub25Mb2dpbih0aGlzLnN0YXRlKTtcbiAgfTtcblxuICByZW5kZXIoKSB7XG4gICAgY29uc3QgeyBjb25maWcsIGluUHJvZ3Jlc3MgfSA9IHRoaXMucHJvcHM7XG5cbiAgICByZXR1cm4gKFxuICAgICAgPFN0eWxlZEF1dGhlbnRpY2F0aW9uUGFnZT5cbiAgICAgICAgPFBhZ2VMb2dvSWNvbiBzaXplPVwiMzAwcHhcIiB0eXBlPVwibmV0bGlmeS1jbXNcIiAvPlxuICAgICAgICA8TG9naW5CdXR0b24gZGlzYWJsZWQ9e2luUHJvZ3Jlc3N9IG9uQ2xpY2s9e3RoaXMuaGFuZGxlTG9naW59PlxuICAgICAgICAgIHtpblByb2dyZXNzID8gJ0xvZ2dpbmcgaW4uLi4nIDogJ0xvZ2luJ31cbiAgICAgICAgPC9Mb2dpbkJ1dHRvbj5cbiAgICAgICAge2NvbmZpZy5nZXQoJ3NpdGVfdXJsJykgJiYgPEdvQmFja0J1dHRvbiBocmVmPXtjb25maWcuZ2V0KCdzaXRlX3VybCcpfT48L0dvQmFja0J1dHRvbj59XG4gICAgICA8L1N0eWxlZEF1dGhlbnRpY2F0aW9uUGFnZT5cbiAgICApO1xuICB9XG59XG4iXX0= */"));

class AuthenticationPage extends _react.default.Component {
  constructor() {
    super(...arguments);

    _defineProperty(this, "handleLogin", e => {
      e.preventDefault();
      this.props.onLogin(this.state);
    });
  }

  componentDidMount() {
    /**
     * Allow login screen to be skipped for demo purposes.
     */
    const skipLogin = this.props.config.getIn(['backend', 'login']) === false;

    if (skipLogin) {
      this.props.onLogin(this.state);
    }
  }

  render() {
    const {
      config,
      inProgress
    } = this.props;
    return _react.default.createElement(StyledAuthenticationPage, null, _react.default.createElement(PageLogoIcon, {
      size: "300px",
      type: "netlify-cms"
    }), _react.default.createElement(LoginButton, {
      disabled: inProgress,
      onClick: this.handleLogin
    }, inProgress ? 'Logging in...' : 'Login'), config.get('site_url') && _react.default.createElement(_netlifyCmsUiDefault.GoBackButton, {
      href: config.get('site_url')
    }));
  }

}

exports.default = AuthenticationPage;

_defineProperty(AuthenticationPage, "propTypes", {
  onLogin: _propTypes.default.func.isRequired,
  inProgress: _propTypes.default.bool,
  config: _reactImmutableProptypes.default.map.isRequired
});